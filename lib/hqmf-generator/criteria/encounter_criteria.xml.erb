      <entry typeCode="DRIV">
        <%= xml_for_local_variable(criteria) %>
        <encounterCriteria moodCode="EVN" classCode="ENC"<%= " actionNegationInd='true'" if criteria.negation %>>
          <%= xml_for_template(criteria, is_source_data_criteria) unless criteria.specific_occurrence %>
          <id root="2.16.840.1.113883.3.100.1" extension="<%= criteria.id %>"/>
          <%= xml_for_code(criteria) unless criteria.specific_occurrence %>
          <%= xml_for_description(criteria) unless criteria.specific_occurrence %>
          <%= xml_for_effective_time(criteria) %>
          <%= xml_for_reason(criteria) %>
          <%-unless criteria.specific_occurrence-%>
          <definition>
            <criteriaReference moodCode="EVN" classCode="ENC">
              <id root="2.16.840.1.113883.3.100.1" extension="<%= section_name(criteria) %>"/>
            </criteriaReference>
          </definition>
          <%-end-%>
          <%= xml_for_temporal_references(criteria) %>
          <%= xml_for_fields(criteria) %>
          <%= xml_for_derivation(criteria) %>
          <%= xml_for_subsets(criteria) %>
        </encounterCriteria>
      </entry>
